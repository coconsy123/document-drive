{% extends 'layout/base.html' %}
{% load static %}
{% load tags %}
{% block body %}

<div class="row">
  <div class="col-xl-9 col-md-6 box-col-6">
      <div class="card">
        <div class="card-header">
          <div class="media">
            <div class="media-body text-end">
              <button class="btn btn-primary" type="btn" onClick="printDiv();"><i class="fa fa-print"></i> Print</button>
            </div>
          </div>
        </div>
        <div class="card-body" id="libraryBody">
          <div class="layout-front">
            <table class="table table-bordered table-condensed">
              <tr>
                  <th width="15%"><img src="{% static 'images/dswd.png' %}" width="90%"></th>
                  <th width="15%"><img src="{% static 'images/bagong_pilipinas.png' %}" width="90%"></th>
                  <th>
                    <center>
                    <h5 style="margin-right: 110px;"><strong>LEGAL SECTION<br>
                      OFFICE OF THE REGIONAL DIRECTOR<br>
                      FIELD OFFICE CARAGA</strong></h5>
                      <p style="margin-right: 110px;">DSWD-GF-004 | REV 01 / 12 OCT 2021</p>
                    <center>
                  </th>
              </tr>
            </table>
          </div>
            <table class="table table-bordered">
              <thead>
                <tr style="border: 1px solid black;">
                    <th colspan="6" style="border: 1px solid black;"><center><strong>MONITORING REPORT FOR CONTRACT</strong><center></th>
                </tr>
                <tr style="border: 1px solid black;">
                  <th colspan="6" style="border: 1px solid black;"><center><strong>CALENDAR YEAR 2024</strong><center></th>
                </tr>
                <tr style="border: 1px solid black;">
                  <th colspan="6" style="border: 1px solid black;"><strong>PROPONENTS OBSU</strong></th>
                </tr>
                <tr style="border: 1px solid black;">
                  <th style="text-align:center; border: 1px solid black;"><strong>TITLE</strong></th>
                  <th style="text-align:center; border: 1px solid black;"><strong>DATE OF CONTRACT</strong></th>
                  <th style="text-align:center; border: 1px solid black;"><strong>IMPLEMENTING PROPONENT/OBSU</strong></th>
                  <th style="text-align:center; border: 1px solid black;"><strong>TYPE OF CONTRACT</strong></th>
                  <th style="text-align:center; border: 1px solid black;"><strong>DATE OF COVERAGE</strong></th>
                  <th style="text-align:center; border: 1px solid black;"><strong>REMARKS</strong></th>
                </tr>
              </thead>
              <tbody>
                {% for row in data %}
                  <tr>
                    <td style="border: 1px solid black;">{{ row.title }}</td>
                    <td style="text-align:center; border: 1px solid black;">{{ row.date_created }}</td>
                    <td style="text-align:center; border: 1px solid black;">{{ row.section_type }}</td>
                    <td style="text-align:center; border: 1px solid black;">{{ row.document_type_name }}</td>
                    <td style="text-align:center; border: 1px solid black;">{{ row.date_of_coverage }}</td>
                    <td style="border: 1px solid black;">{{ row.remarks }}</td>
                  </tr>
                {% endfor %}
              </tbody>
              <tfoot>
                <tr>
                  <th style="border: 1px solid black;" colspan="2" contenteditable="true">Date: </th>
                  <th style="border: 1px solid black;" colspan="2" contenteditable="true">Prepared By<br>Name: <strong>{{ request.user.full_name }}</strong><br>Designation: </th>
                  <th style="border: 1px solid black;" colspan="2" contenteditable="true">Noted By<br>Name: <strong>{{ request.user.full_name }}</strong><br>Designation: </th>
                </tr>
              </tfoot>
            </table>
        </div>
      </div>
    </div>
    <div class="col-3">
      <div class="default-according style-1 faq-accordion job-accordion">
         <div class="accordion" id="accordionExample">
            <div class="card">
               <div class="card-header" id="headingOne">
                  <h2 class="mb-0">
                     <button class="btn btn-link btn-block text-start" type="button" >Filter</button>
                  </h2>
               </div>
               <div class="collapse show" id="collapseOne" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                  <div class="card-body filter-cards-view animate-chk">
                     <form hx-get="{% url 'backend-contract-files-page' action='filter-date'%}" hx-trigger="submit" hx-target="#" hx-indicator="#spinner">
                        {% csrf_token %}
                        <div class="job-filter mb-2">
                           <label>Start Date:</label>
                           <div class="faq-form">
                            <input type="date" class="form-control" name="start_date" id="start-date">
                           </div>
                        </div>
                        <div class="job-filter mb-2">
                           <label>End Date:</label>
                           <div class="faq-form">
                            <input type="date" class="form-control" name="end_date" id="end-date">
                           </div>
                        </div>
                         <br>
                        <div class="d-flex justify-content-end">
                           <button class="btn btn-primary text-center col-5" type="submit" >Generate Report</button>
                        </div>
                     </form>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

{% endblock %}
{% block script %}
<script>
    function printDiv(){

      var divToPrint=document.getElementById('libraryBody');

      var newWin=window.open('','Print-Window');

      newWin.document.open();

      newWin.document.write('<html><body onload="window.print()">'+divToPrint.innerHTML+'</body></html>');

      newWin.document.close();

      setTimeout(function(){newWin.close();},10);

    }
</script>
{% endblock %}
