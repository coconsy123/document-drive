{% extends 'layout/base.html' %}
{% load static %}
{% load tags %}
{% block body %}

<div class="row">
  <div class="col-xl-9 col-md-6 box-col-6">
      <div class="card">
        <div class="card-header">
          <div class="media">
            <div class="media-body text-end">
              <button class="btn btn-primary" type="btn" onClick="printDiv();"><i class="fa fa-print"></i> Print</button>
            </div>
          </div>
        </div>
        <div class="card-body" id="libraryBody">
          {% include 'backend/contract_files/reports/partial-reports.html' %}
        </div>
      </div>
    </div>
    <div class="col-3">
      <div class="default-according style-1 faq-accordion job-accordion">
         <div class="accordion" id="accordionExample">
            <div class="card">
               <div class="card-header" id="headingOne">
                  <h2 class="mb-0">
                     <button class="btn btn-link btn-block text-start" type="button" >Filter</button>
                  </h2>
               </div>
               <div class="collapse show" id="collapseOne" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                  <div class="card-body filter-cards-view animate-chk">
                    <form hx-get="{% url 'backend-generate-report' action='generate-report'%}" hx-trigger="submit" hx-target="#libraryBody" hx-indicator="#spinner">
                        {% csrf_token %}
                        <div class="job-filter mb-2">
                          <label>Start Date:</label>
                          <div class="faq-form">
                             <input type="date" class="form-control" name="start_date" id="start_date">
                          </div>
                       </div>
                       <div class="job-filter mb-2">
                          <label>End Date:</label>
                          <div class="faq-form">
                             <input type="date" class="form-control" name="end_date" id="end_date">
                          </div>
                       </div>
                         <br>
                        <div class="d-flex justify-content-end">
                           <button class="btn btn-primary text-center col-5" type="submit" >Generate Report</button>
                        </div>
                     </form>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

{% endblock %}
{% block script %}
<script>


    function printDiv(){

      var divToPrint=document.getElementById('libraryBody');

      var newWin=window.open('','Print-Window');

      newWin.document.open();

      newWin.document.write('<html><body onload="window.print()">'+divToPrint.innerHTML+'</body></html>');

      newWin.document.close();

      setTimeout(function(){newWin.close();},10);

    }
</script>
{% endblock %}
